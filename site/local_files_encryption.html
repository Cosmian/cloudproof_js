<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta http-equiv="x-dns-prefetch-control" content="off" />
    <base href="/" />
    <title>Cosmian JS Lib</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
        }

        #encryption_drop_zone {
            border: 5px solid green;
            width: 200px;
            height: 100px;
        }

        #decryption_drop_zone {
            border: 5px solid blue;
            width: 200px;
            height: 100px;
        }

        #sep {
            height: 20px;
        }
    </style>
    <script>

        function on_drag_over(event) {
            // prevent default drag over event
            event.preventDefault()
        }

        // from: https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/File_drag_and_drop
        function recover_files(ev) {

            // Prevent default behavior (Prevent file from being opened)
            ev.preventDefault();

            var files = []

            if (ev.dataTransfer.items) {
                // Use DataTransferItemList interface to access the file(s)
                for (var i = 0; i < ev.dataTransfer.items.length; i++) {
                    // If dropped items aren't files, reject them
                    if (ev.dataTransfer.items[i].kind === 'file') {
                        files.push(ev.dataTransfer.items[i].getAsFile());
                    }
                }
            } else {
                // Use DataTransfer interface to access the file(s)
                for (var i = 0; i < ev.dataTransfer.files.length; i++) {
                    files.push(ev.dataTransfer.files[i]);
                }
            }
            return files;
        }
    </script>
</head>

<body>
    <script src="./main.js"></script>
    <div id="encryption_drop_zone" ondrop="encrypt_files(recover_files(event));" ondragover="on_drag_over(event);">
        <p>Drag one or more files to this Drop Zone to <b>encrypt</b> them ...</p>
    </div>
    <div id="sep"></div>
    <div id="decryption_drop_zone" ondrop="decrypt_files(recover_files(event));" ondragover="on_drag_over(event);">
        <p>Drag one or more files to this Drop Zone to <b>decrypt</b> them ...</p>
    </div>
    <noscript class="app-noscript">
        Requires Javascript
    </noscript>
</body>

</html>